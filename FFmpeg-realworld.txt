 ffmpeg -i {} -c:a aac -ab 320k -c:v h264_qsv -preset veryslow -look_ahead 1 -look_ahead_depth 60 -look_ahead_downsampling 3 -vb 6M {}



在线播放

阿里云盘：
mpv --http-header-fields='referer:https://www.aliyundrive.com/','user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.39' "https://bj29.cn-beijing.data.alicloudccp.com/5fc46d20e3a9e6d57aa8437d8e1f5fccd37ac765%2F5fc46d20f813a23cfd9c47a588e1f056881775e4?di=bj29&dr=845445&f=5fc46d20e3a9e6d57aa8437d8e1f5fccd37ac765&response-content-disposition=attachment%3B%20filename%2A%3DUTF-8%27%27Zootopia.2016.2160p.UHD.BluRay.x265-TERMiNAL.mkv&u=d211ced31ff2499cb8d7910249c1c193&x-oss-access-key-id=LTAIsE5mAn2F493Q&x-oss-additional-headers=referer&x-oss-expires=1619360806&x-oss-signature=U3A6pVgyvnL%2BK1mbJ47zgXMAkVodq6XzCjG765G%2FefU%3D&x-oss-signature-version=OSS2"

B站：
mpv --http-header-fields='referer:https://www.bilibili.com/','user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.39' "https://cn-sxty2-cu-v-05.bilivideo.com/upgcxcode/82/40/329954082/329954082_nb2-1-80.flv?e=ig8euxZM2rNcNbU3hwdVhoMBnwdVhwdEto8g5X10ugNcXBlqNxHxNEVE5XREto8KqJZHUa6m5J0SqE85tZvEuENvNo8g2ENvNo8i8o859r1qXg8xNEVE5XREto8GuFGv2U7SuxI72X6fTr859r1qXg8gNEVE5XREto8z5JZC2X2gkX5L5F1eTX1jkXlsTXHeux_f2o859IB_&uipk=5&nbs=1&deadline=1620112599&gen=playurlv2&os=vcache&oi=1026793212&trid=ed7cba696eed4047aba32d117c11345ep&platform=pc&upsig=28a3af08f1f67029d7e7fd981324b49b&uparams=e,uipk,nbs,deadline,gen,os,oi,trid,platform&cdnid=10927&mid=310265481&orderid=0,3&agrr=1&logo=80000000" --audio-file="a"

Onedrive：
mpv --http-header-fields='cookie: rtFa=vgws1pgojsLBSNC2HynN768A8LX1AkHGbCS13e/G08QmQ0RGNDg5NjEtNTdBOS00MTE0LTk3NzYtN0FCNTVFQTU1RTFDk9wJbg3Q1nvxCGhkOjnTpW3TBWmKRufpmuUtzJ0/0r5jag7fOmIMOJW96Mly4f6wmG26jeWEJWBPnpLkV6yRN2+YvnDZ44u4DW23GNGX7waRev4W5vjWWHQCFnw/RAW5ssFYyPSDmakg+eGQuOmCL2qxKsPk/GbTWOL4w8B7LMsHtFRYVZtsCaM3duXqF5poWasWF6obFxBzMFzwpVMsDc8mAjhXwznwMSTxbteGfCPVPhd5AUvkO/G4m6epQ0DnEPq1wnpirUj43VFpx68FYfu/H8RK70U1olKq1E9rKLYrECtqjN/6+X8ntuNF0tQ9sm8IUhz9m9D7iM07RujgnEUAAAA=; CCSInfo=MjAyMS80LzI3IDE6MjY6MjFc1v7Goo45y0fSBR4bOkgnQOd5RaA9+jtERTrtBev4D1tWjSI2rsoznmPw1ilXHy8/BAkcvV6aaw4E4vbbje0koEWoJzQJ2lpLnoRIOh9My/VJb+pjGsOXOj85HQ8EZx7OlQue8aViOue2iNBaEXMS4x7FYVUA/KTuYp+B/KBs2YUdbMtQXJLkk/Mc5dRwFEJSN5fKGzufoASEmJZQxJWd4LH/TakltLn1OFdOtjJytz8rEXEMC2gBHhS3AFaWUAwpEjdbzKgSJ+M9q7USjVKbxKws3Yv5BDdW/PFaEGIK2uvxGzNYaGSiQqobGTuiNu/qqY2BMTFZJ0W65Etdwj/1EQAAAA==; FedAuth=77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48U1A+VjksMGguZnxtZW1iZXJzaGlwfDEwMDMyMDAxMTNhNTdhYjVAbGl2ZS5jb20sMCMuZnxtZW1iZXJzaGlwfGFkdC00NjE5QGJ1cHQuZWR1LmNuLDEzMjU3MTY0NTUwMDAwMDAwMCwxMzI1Njk3MzA3NTAwMDAwMDAsMTMyNjQwNTU0ODcxODMzNTM0LDU5LjY0LjEyOS4yNDAsMyxjZGY0ODk2MS01N2E5LTQxMTQtOTc3Ni03YWI1NWVhNTVlMWMsLGFkOGQ5ODU5LWRiMGMtNDU1Mi05MjJiLTY4ODE4Mzg0ZGM5Niw1MThlYzA5Zi1iMGFiLTIwMDAtZDVmYi1mMjAxMDY1MjZmMjUsNzZmMGMwOWYtNzBkOC0yMDAwLWRhMTEtM2U1MmU2YmIyOTA0LCwwLDEzMjYzNzA5ODg3MTgzMzUzNCwxMzI2Mzg4MjY4NzE4MzM1MzQsLCxleUo0YlhOZlkyTWlPaUpiWENKRFVERmNJbDBpTENKNGJYTmZjM050SWpvaU1TSjksMjY1MDQ2Nzc0Mzk5OTk5OTk5OSwxMzI2MzUyMDU3MzAwMDAwMDAsZmZmOTJjYjQtM2ZmOS00ZWY4LTgzOTQtNDA4ZmYxMjM1YmExLCwsLCxXaXYxU20vKzh4QWxDa0hDVjQydk5VdVIxQ0hDbmZPS3Zvbjhwa3N3MHFRNDMxNXRHRHlCZWZab3BwNk9iZmNhZzdDa0NucDZrVFB3M3MyRVNMZUV5b1hlT2F6L2pQWndmME0xaDNmc1BVSHZTTEsxbThyTXR5TTBFWThZRGR4M0cySmV6NlM4TFhkeGtRTUUxK0xTTkNvcWpaNHh4NnNuV0dDWDRiRGhkUHpFamlCTWRma1pRd3RWMUYwcUhvQk9GM1lEK1Z3eGh1b3hVMHZFYXBvMmdlMDJFcDdaOUtBZXI4Z3M5TFZiUTJ2N0ZWUHNnYWM4UmwxK2N6MERJMWJKQjRueHdWWkV3eTF3cURzMmI5NXFVeWhMRVFPczQ2cEJrZXovWnNFNmFCckZ1c2NSazJjaFRqMGdvcDE2WUowZlU2U1lVZEdwdWExbGZ5SU1LME1kZ1E9PTwvU1A+; cucg=1' "https://bupteducn-my.sharepoint.com/personal/adt-4619_bupt_edu_cn/_layouts/15/download.aspx?UniqueId=3c2a4510%2D51d7%2D4c75%2D8856%2De8424c8dfa40"


Referer下载视频：

B站：
ffplay -headers "referer:https://www.bilibili.com/video/av205203642/" -headers "user-agent:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.39"  -i "https://cn-tj2-cmcc-bcache-08.bilivideo.com/upgcxcode/03/08/327030803/327030803-1-116.flv?e=ig8euxZM2rNcNbRjhbdVhwdlhWTghwdVhoNvNC8BqJIzNbfqXBvEqxTEto8BTrNvN0GvT90W5JZMkX_YN0MvXg8gNEV4NC8xNEV4N03eN0B5tZlqNxTEto8BTrNvNeZVuJ10Kj_g2UB02J0mN0B5tZlqNCNEto8BTrNvNC7MTX502C8f2jmMQJ6mqF2fka1mqx6gqj0eN0B599M=&uipk=5&nbs=1&deadline=1619060176&gen=playurlv2&os=bcache&oi=3746063178&trid=eef39aa00b6d4be5a3cfee8f945dd248u&platform=pc&upsig=b61d8f5a577c949ab3252e99d8deb976&uparams=e,uipk,nbs,deadline,gen,os,oi,trid,platform&cdnid=6779&mid=310265481&orderid=0,3&agrr=0&logo=80000000" 

阿里云盘
ffplay -headers "referer:https://www.aliyundrive.com/" -user_agent "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.39" -i "https://bj29.cn-beijing.data.alicloudccp.com/5fc351dac3b639b7c82e49d7a927f551ba17a8c1%2F5fc351daefd6f532f9d347e2bc8930f04fd6a612?di=bj29&dr=845445&f=5fc351dac3b639b7c82e49d7a927f551ba17a8c1&response-content-disposition=attachment%3B%20filename%2A%3DUTF-8%27%27Formula.1.Drive.to.Survive.S01E10.2019.Netflix.WEB-DL.4k.HEVC.DDP-AREY.mkv&u=d211ced31ff2499cb8d7910249c1c193&x-oss-access-key-id=LTAIsE5mAn2F493Q&x-oss-additional-headers=referer&x-oss-expires=1619109646&x-oss-signature=HkzFUEM2e8AkweC%2B6m4A1xi7j91Pfw%2FpJSuS%2F1nIU4w%3D&x-oss-signature-version=OSS2" 


Powershell批量
get-childitem -name -r *.png | foreach-object {ffmpeg -i $_  "D:\Drivers\QQfiles\1981671849\FileRecv\11班同学照片\from 董岩博\png\$_"}


多轨道截取
ffmpeg -ss 00:00:00 -i "E:\Frozen.II.2019.1080p.TWN.Blu-ray.AVC.DTS-HD.MA.7.1-nLiBRA\BDMV\STREAM\00906.m2ts" -t 00:01:02.60 -map 0:v -c:v copy  -map 0:a -c:a copy -map 0:s -c:s copy -map_metadata 0  -max_muxing_queue_size 9999 "J:\temp\AIF-pt2.mkv"


ffmpeg -ss 00:05:00 -i "F:\Frozen.2013.2160p.UHD.BluRay.TrueHD.7.1.Atmos.HDR.x265-BlzT.mkv" -c:v libx264 -vb 10000k -vf zscale=t=smpte2084:npl=100,zscale=p=bt709:t=bt709:m=9:r=pc,format=yuv420p10 test-HDR.mp4


ffmpeg -i "E:\Show Yourself(From Frozen 2019)\粤语.mp4" -c:v copy -color_primaries bt2020 -colorspace bt2020nc -color_trc smpte2084 "F:\test HDR add.mkv"


HDR+SVP
ffmpeg -i "C:\Users\李竞择\Documents\avs脚本\3x动画.avs" -c:v libx265 -x265-params "level=6:colorprim=bt2020:colormatrix=bt2020nc:transfer=smpte2084:master-display=G(13250,34500)B(7500,3000)R(34000,16000)WP(15635,16450)L(10000000,1)" -pass 2 -b:v 50000k -preset fast -c:a copy "F:\test HDR.mkv"


ffmpeg -i "C:\Users\李竞择\Documents\Tencent Files\1981671849\FileRecv\3306c6.avs" -c:v hevc_nvenc -rc 7 -b:v 100M -preset 1 -qmin 1 -qmax 35 -color_primaries bt2020 -colorspace bt2020nc -color_trc smpte2084 "F:\12323.mkv"


去水印
ffmpeg -i "120fps测试.mkv" -vf delogo=x=983:y=23:w=275:h=65 -c:v hevc_nvenc -vb 6000k -c:a copy "delogo sample.mkv"


ffmpeg -i "C:\Users\李竞择\Documents\Tencent Files\1981671849\FileRecv\3306c6.avs" -c:v libx265 -x265-params "level=6:colorprim=bt2020:colormatrix=bt2020nc:transfer=smpte2084:master-display=G(13250,34500)B(7500,3000)R(34000,16000)WP(15635,16450)L(10000000,1)" -crf 24 -preset ultrafast "C:\Users\李竞择\Documents\Tencent Files\1981671849\FileRecv\1232423.mkv"


打码
ffmpeg -hwaccel dxva2 -i "E:\ONIICHAN REJECTS YOU _ VRCHAT Funny Moments-JZgVdH5orYE.mp4" -lavfi "
[0:v]trim=0:444.3,setpts=PTS-STARTPTS[a],
[0:v]trim=444.3:450.867,gblur=50,setpts=PTS-STARTPTS[b],
[0:v]trim=start=450.867,setpts=PTS-STARTPTS[c],
[a][b][c]concat=n=3[out]
" -map [out] -map 0:a -c:v h264_qsv -preset veryslow -look_ahead 1 -look_ahead_depth 60 -look_ahead_downsampling 3 -vb 8M -c:a aac -ab 320k blur.mkv


合并用
ffmpeg -f concat -safe 0 -i "C:\Users\Lee7723\Documents\avs脚本\合并.txt" -map 0 -c copy "J:\AIF.mkv"


SVP HDR Project temp for 20
ffmpeg -i "C:\Users\李竞择\Documents\Tencent Files\1981671849\FileRecv\3306c6.avs"  -c:v libx265 -crf 10 -preset veryfast -x265-params "keyint=230:repeat-headers=1:aq-mode=2:qpmin=0:qpmax=16:colorprim=bt2020:colormatrix=bt2020nc:transfer=smpte2084:master-display=G(13250,34500)B(7500,3000)R(34000,16000)WP(15635,16450)L(10000000,500)"  "E:\SVP Project\Frozen II - Ultra HD™-020---.mkv"


ffmpeg -i "C:\Users\李竞择\Documents\Tencent Files\1981671849\FileRecv\3306c6.avs"  -c:v libx265 -crf 8 -preset slow -x265-params "keyint=230:repeat-headers=1:aq-mode=2:qpmin=3:qpmax=14:colorprim=bt2020:colormatrix=bt2020nc:transfer=smpte2084:master-display=G(13250,34500)B(7500,3000)R(34000,16000)WP(15635,16450)L(10000000,500)"  "E:\SVP Project\Frozen II - Ultra HD™-011---.mkv"


gif编码
ffmpeg -ss 00:06:25 -i "E:\Minions.2015.720p.BluRay.x264-WiKi\Minions.2015.720p.BluRay.x264-WiKi.mkv" -t 00:00:30 -c:v gif "f:\out.gif"

设备
ffmpeg -list_devices true -f dshow -i dummy

录屏
ffmpeg -f gdigrab -i desktop -c:v png "j:\temp\test.mkv"

ffmpeg -y  -f dshow -i video="screen-capture-recorder"  -r 60 -c:v hevc_nvenc -b:v 8000k "j:\temp\test.mkv"

录音（麦克风）
ffmpeg -f dshow -i audio="@device_cm_{33D9A762-90C8-11D0-BD43-00A0C911CE86}\wave_{59AC4CB8-DC81-41F4-8ED1-DBB00D00AFD9}"  "j:\out.wav"
 
 （立体声混音）
ffmpeg -f dshow -i audio="@device_cm_{33D9A762-90C8-11D0-BD43-00A0C911CE86}\wave_{6B19272A-66F9-4520-9DAA-1F978352C915}"  "j:\out.wav"


avs转色域
ffmpeg -i "C:\Users\李竞择\Documents\avs脚本\HDR转映射.avs" -c:v nvenc preset=11 "F:\out.mkv"


转色域
ffmpeg -ss 00:09:00 -i "F:\Frozen.2013.2160p.UHD.BluRay.TrueHD.7.1.Atmos.HDR.x265-BlzT.mkv" -vf zscale=t=linear:npl=100,format=gbrpf32le,zscale=p=bt709,tonemap=clip,zscale=t=bt709:m=bt709:r=pc,format=yuv420p -c:v libx264 -preset veryfast -an "E:\ITU--.mp4"

hable:desat=0:peak=6


转映射+SVP
"C:\Program Files\VapourSynth\core\vspipe.exe" --y4m  "C:\Users\Lee7723\Documents\avs脚本\SVP+Tonemap.vpy" - |ffmpeg -i - -i "K:\Movies\Frozen.I-II.2014-2019.UHD.BluRay.2160p.10bit.HDR.4Audio.TrueHD(Atmos).7.1.x265-beAst\Frozen.II.2019.RERIP.UHD.BluRay.2160p.10bit.HDR.4Audio.TrueHD(Atmos).7.1.x265-beAst\UTF-8vocals.wav"  -vf format=yuv420p -map 0:0 -map 1:a -c:v h264_nvenc -preset 1 -2pass 1 -b:v 30000k -c:a aac -ab 320k  "AIF-vocal.mp4"

转映射
vspipe --y4m  "C:\Users\19816\Documents\Video Encoding\转映射.vpy" - |ffmpeg -i - -i "D:\Temporary Work Space\LIG(multi audio track).mkv" -vf format=yuv420p,"subtitles=LIG(multi audio track).ass" -map 0:0 -map 1:a:0 -c:v h264_qsv -preset veryslow -b:v 10000k -look_ahead 1 -sn -c:a aac -ab 320k  "LIG 4K.mp4"


SDR -> HDR
ffmpeg -i "C:\Users\19816\Documents\Video Encoding\temp.avs" -vf zscale=p=2020:t=smpte2084:m=2020_ncl:pin=709:tin=bt709:min=709:npl=300,format=yuv420p -c:v h264_qsv -b:v 100000k -preset veryslow "qsv-hdr_2.mp4"


转映射Open-CL
ffmpeg -i I:\Frozen.2013.2160p.UHD.BluRay.TrueHD.7.1.Atmos.HDR.x265-BlzT.mkv -vf "format=p010,hwupload,tonemap_opencl=t=bt2020:tonemap=linear:format=p010,hwdownload,format=p010" -c:v libx264 -r 0.1 J:\temp\test.mkv


裁剪
ffmpeg -ss 00:00:00.87 -i "C:\Users\李竞择\Videos\Captures\NeedForSpeedPayback_2020_04_25_21_02_13_522.mkv" -t 00:00:12.00 -vf setpts=2*PTS,crop=2000:2000:720:0,scale=320:320,setsar=1:1 -c:v libx264 -fs 1024k -af atempo=0.5 -c:a aac -ab 96k f:/out.mp4


裁剪
ffmpeg -ss 00:00:03.83 -i "E:\Frozen.II.2019.1080p.TWN.Blu-ray.AVC.DTS-HD.MA.7.1-nLiBRA\BDMV\STREAM\00907.m2ts" -t 00:00:03.95 -vf setpts=2*PTS,crop=1600:1600:680:240,scale=320:320,setsar=1:1 -r 10 -c gif f:/out.gif


烧录字幕（需要在要编辑的视频目录下打开命令行，不能用于非文字类字幕）
ffmpeg -i "C:\Users\19816\Documents\Video Encoding\temp.avs" -vf subtitles="Once.Upon.a.Snowman.2020.DSNYP.1080p.WEBRip.X264.Atmos-EVO(Lee-7723搬).ass" -c:v libx264 -preset slow  -crf 20 "netease.mp4"


烧录字幕（另一种滤镜，可用于sup（PGS）图形字幕）
ffmpeg -i 00919.m2ts -filter_complex [0:v][0:s:0]overlay[v] -map [v] -map 0:a -c:v h264_nvenc -c:a copy -cq 1 j:\temp\test-sub.mkv



图片序列编码为视频
ffmpeg -threads 6 -f image2 -i "E:\Adobe Premiere Pro Auto-Save\1603865541285_1_2.00x_4680x2160_thf-1.0.1_2.00x_9360x4320_thf-1.0.1_png\00%4d.png" -i "D:\FFOutput\Voicians - Empire.mp3" -c:v libx264 -crf 16 -preset slow -r 50 -c:a copy "D:\encoded.mkv"

ffmpeg -threads 6 -f image2 -i "E:\Adobe Premiere Pro Auto-Save\1603865541285_1_2.00x_4680x2160_thf-1.0.1_2.00x_9360x4320_thf-1.0.1_png\00%4d.png" -i "D:\FFOutput\Voicians - Empire.mp3" -c:v hevc_nvenc -vb 20000k -r 50 -c:a copy "D:\encoded.mkv"



混流
ffmpeg -i "E:\Frozen II 2019 BluRay HDR 2160p Atmos TrueHD7 1 x265 10bit-CHD\冰2-EVO+自己压制版.mkv" -i "E:\Frozen II 2019 BluRay HDR 2160p Atmos TrueHD7 1 x265 10bit-CHD\Frozen II 2019 BluRay HDR 2160p Atmos TrueHD7 1 x265 10bit- Lee-7723.mp4" -map 0:0 -c:v copy -c:a aac -b:a 320k "f:\码率.mp4"


Bilibili上传用（失效）
ffmpeg -i "C:\Users\李竞择\Documents\avs脚本\5x动画.avs" -c:a aac -b:a 320k -vf format=yuv420p -c:v libx264 -preset slow -x264-params "keyint=230" -b:v 20000k -bufsize 3000k -maxrate 50000k -pass 1 -f mp4 NUL
ffmpeg -i "C:\Users\李竞择\Documents\avs脚本\5x动画.avs" -c:a aac -b:a 320k -vf format=yuv420p -c:v libx264 -preset slow -x264-params "keyint=230" -b:v 20000k -bufsize 3000k -maxrate 50000k -pass 2 "j:\temp\Try Everything SVP 120fps.mp4"


转播用
$url=$(youtube-dl -g https://www.twitch.tv/glubbable );`
for($i=1;$i-lt 20;$i--) `
{ffmpeg `
-re `
-f hls  `
-reconnect_at_eof  1 `
-reconnect_streamed 1  `
-rtbufsize 10M `
-i "$url" `
-c copy `
-f flv `
-ignore_io_errors 1 `
"rtmp://live-push.bilivideo.com/live-bvc/?streamname=live_310265481_75466439&key=def5381fa58bcc8e2f235d250f2888a7&schedule=rtmp"}


$url=$(youtube-dl -g https://www.twitch.tv/bigboy );`
for($i=1;$i-lt 20;$i--) `
{ffmpeg `
-re `
-rtbufsize 10M `
-i "$url" `
-c copy `
-f flv `
-ignore_io_errors 1 `
"rtmp://live-push.bilivideo.com/live-bvc/?streamname=live_310265481_75466439&key=def5381fa58bcc8e2f235d250f2888a7&schedule=rtmp"}



转m3u8
ffmpeg -i "F:\Formula.1.Drive.to.Survive.S02.1080p.NF.WEB-DL.DDP5.1.x264-NTG\Formula.1.Drive.to.Survive.S02E01.Lights.Out.1080p.NF.WEB-DL.DDP5.1.x264-NTG.mkv" -c:v libx264 -preset slow -tune film -vb 3000k -c:a copy -map 0:s -map 0:v -map 0:a -c:s copy -f hls -hls_time 60 -hls_list_size 0 D:\temp\hls-test\test.m3u8

ffmpeg -i "F:\Formula.1.Drive.to.Survive.S02.1080p.NF.WEB-DL.DDP5.1.x264-NTG\Formula.1.Drive.to.Survive.S02E01.Lights.Out.1080p.NF.WEB-DL.DDP5.1.x264-NTG.mkv" -f segment -segment_time 30 -segment_format mpegts -segment_list D:\temp\hls-test\test.m3u8 -c:v h264_qsv -preset veryslow -vb 2500k -map 0 -c:a copy -c:s copy -bsf:v h264_mp4toannexb D:\temp\hls-test\test%3d.ts

ffmpeg -i "E:\SSIM_test\clips\00910.m2ts" -c:v libx264 -preset slow -tune film -vb 3000k -c:a copy -map 0:s -map 0:v -map 0:a -c:s copy -flags +cgop -g 30 -hls_time 60 hls\out.m3u8

ffmpeg -re -i "E:\SSIM_test\clips\00910.m2ts" -codec copy -map 0 -f segment -segment_list hls/playlist.m3u8 -segment_list_flags +live -segment_time 3 hls\out%03d.mkv


硬解测试
ffmpeg -hwaccel qsv -threads 1 -i INPUT -max_muxing_queue_size 1024 -f null  -  -benchmark
ffmpeg -hwaccel cuvid -threads 1 -i "I:\Frozen.2013.2160p.UHD.BluRay.TrueHD.7.1.Atmos.HDR.x265-BlzT.mkv" -max_muxing_queue_size 1024 -f null  -  -benchmark


显示视频详细信息
ffprobe -show_format -print_format json -show_streams 


测试OGG
ffmpeg -i "C:\Users\Lee7723\Documents\Tencent Files\1981671849\FileRecv\Starset - My Demons.wav" -c:a libvorbis "C:\Users\Lee7723\Documents\Tencent Files\1981671849\FileRecv\Starset - My Demons.ogg"


指定声道混音
-map_channel
ffmpeg -i "E:\Frozen 2 Domestic Trailer 1.mov" -filter_complex "[0:a:0][0:a:1][0:a:2][0:a:3][0:a:4][0:a:5]amerge=inputs=6" -c:a truehd -strict -2 audio-merge.ac3

ffmpeg -i   -af "pan=5.1|c0=stream1|c1=stream1|c2=stream1|c3=stream1|c4=stream1|stream1" -c:a ac3 "E:\Frozen Series\Frozen 2 Domestic Trailer 1.mka"

静音某声道
ffmpeg -ss 00:06:00.00 -i "K:\Movies\FROZEN~1.X26\FROZEN~1.X26\FROZEN~1.MKV"  -t 00:01:51.07 -c:v copy -af "pan=7.1|c0=c0|c1=c1|c3=c3|c4=c4|c5=c5|c6=c6|c7=c7" -c:a aac -ac 2 -ab 320k "AIF.mp4"


ProRes Proxy
ffmpeg -i J:\temp\test.mkv -vf unsharp -c:v prores_ks -profile 0 -an -vb 1600k J:\temp\test1080P-proxy.mov


图片扩展出空像素
ffmpeg  -f image2 -i "D:\Drivers\QQfiles\1981671849\FileRecv\MobileFile\mono\下载%2d.png" -filter_complex "nullsrc=size=1000x1250;[background][0:v] overlay=0:200" -c png -vframes 24 "D:\Drivers\QQfiles\1981671849\FileRecv\MobileFile\mono\mono-white\wallpaper%2d.png"


上一个的基础上背景填充为白色
ffmpeg  -f image2 -i "D:\Drivers\QQfiles\1981671849\FileRecv\MobileFile\mono\下载%2d.png" -filter_complex "nullsrc=size=1000x1250,lutrgb='r= 255:g=255:b=255'[background];[background][0:v] overlay=0:200" -c png -vframes 24 "D:\Drivers\QQfiles\1981671849\FileRecv\MobileFile\mono\mono-white\wallpaper%2d.png"


ffmpeg  -f image2 -i "D:\Drivers\QQfiles\1981671849\FileRecv\MobileFile\mono\下载%2d.png" -i "C:\Users\19816\Pictures\bg.png" -filter_complex "[1:v][0:v] overlay=0:400,format=rgb24" -c png -vframes 32 "D:\Drivers\QQfiles\1981671849\FileRecv\MobileFile\mono\mono-colored\wallpaper%2d.png"


计算SSIM(avs)
ffmpeg -i "C:\Users\19816\Documents\Video Encoding\SSIM.avs" -f null -

计算SSIM(ffmpeg)
ffmpeg -i "E:\2160p.120fps-mvtools.mp4"  -i "D:\迅雷下载\[拉伸4K-含120fps-英字]Once Upon a Snowman.m4s"  -lavfi [0:v]crop=iw:ih-200:0:200[ref];[1:v]crop=iw:ih-200:0:200[com];[ref][com]ssim="stats_file=/SSIM_test/ssim-ffmpeg/bilibili-web.log" -f null -


计算PSNR
ffmpeg -i "E:\2160p.120fps-mvtools.mp4"  -i "E:\download\842551577\3\120\video.m4s"  -lavfi psnr="stats_file=/SSIM_test/psnr-ffmpeg/prores.log" -f null -


VMAF(Netflix)画质判定
ffmpeg -i "E:\SSIM_test\clips\00910.m2ts" -i "E:\SSIM_test\clips\high.mkv" -lavfi libvmaf=model_path="E\\:/SSIM_test/vmaf/vmaf_4k_v0.6.1.pkl:enable_transform" -f null -
(fail)

曲线调色(PS曲线预设)
ffmpeg -i Lanczos4Resize000039.png -lavfi curves=psfile=未命名.acv -c png curve.png

曲线调色(自定点生成曲线)
ffmpeg -i Lanczos4Resize000039.png -lavfi curves=all="0/0 0.25/0.2 0.75/0.8 1/1" -c png curve2.png


MVTools(in progress)
ffmpeg -i "C:\Users\19816\Documents\Video Encoding\mvtools.avs" -c:v h264_qsv -preset veryslow -vb 8000k -movflags +faststart test.mp4


元数据
ffmpeg -i "E:\SSIM_test\clips\high.mkv" -c copy -metadata:s:v:0 title="Enlarged by Lee-7723" -metadata:s:v:0 comment="Encodeing & subtitle by Lee-7723" metatest.mkv


HDR元数据
ffmpeg -i "E:\SSIM_test\clips\00910.m2ts" -vf zscale=p=2020:t=smpte2084:m=2020_ncl:pin=709:tin=bt709:min=709:npl=200,format=yuv420p10 -c:v libx265 -x265-params "level=6:colorprim=bt2020:colormatrix=bt2020nc:transfer=smpte2084:master-display=G(8500,39850)B(6550,2300)R(35400,14600)WP(15635,16450)L(10000000,50)" -b:v 20000k -preset fast -c:a aac -ac 2 -ab 320k "test-HDR.mkv"

master-display=G(8500,39850)B(6550,2300)R(35400,14600)WP(15635,16450)L(10000000,50)
（master-display bt2020）

master-display=G(13250,34500)B(7500,3000)R(34000,16000)WP(15635,16450)L(10000000,1)
（master-display P3）

mp4加上 -movflags +faststart。这样分享文件给别人的时候可以边下边看。


编码预设
-c:a aac -ab 320k 

-c:v h264_qsv -preset veryslow -look_ahead 1 -look_ahead_depth 60 -look_ahead_downsampling 3 -vb 10M
